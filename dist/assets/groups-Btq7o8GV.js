var w=Object.defineProperty;var j=(s,t,e)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>j(s,typeof t!="symbol"?t+"":t,e);import{U as o,s as r,b as y,a as m,c as I,F as L,d as c,u as h,p as u}from"./useUser-DCEtlrZN.js";class G{constructor(){n(this,"selectors",{root:"[data-js-theme]",body:"[data-js-theme-body]",btn:"[data-js-theme-btn]"});n(this,"classes",{isLight:"is-light",isDark:"is-dark"});this.themeElement=$(this.selectors.root),this.themeBodyElement=this.themeElement.find(this.selectors.body),this.themeBtnElement=this.themeBodyElement.find(this.selectors.btn),this.theme="light",this.loadFunctions(),this.bindEvents()}loadFunctions(){this.theme=window.localStorage.getItem("theme")??"light",this.changeTheme(this.theme)}bindEvents(){this.themeBodyElement.on("click",this.clickToTheme.bind(this))}clickToTheme(){this.themeBtnElement.hasClass(this.classes.isLight)?this.changeTheme("dark"):this.changeTheme("light")}changeTheme(t){t==="light"?this.setClassToBtn(this.classes.isDark,this.classes.isLight):this.setClassToBtn(this.classes.isLight,this.classes.isDark),this.setClassToBody(t),this.setToLocStore(t)}setClassToBtn(t,e){this.themeBtnElement.removeClass(t),this.themeBtnElement.addClass(e)}setClassToBody(t){t==="light"?$(document.body).removeClass(this.classes.isDark):$(document.body).addClass(this.classes.isDark)}setToLocStore(t){window.localStorage.setItem("theme",t)}}class T{constructor(){n(this,"selectors",{root:"[data-js-animation]",body:"[data-js-animation-body]",btn:"[data-js-animation-btn]"});n(this,"classes",{isActive:"is-active"});this.animationElement=$(this.selectors.root),this.animationBodyElement=this.animationElement.find(this.selectors.body),this.animationBtnElement=this.animationElement.find(this.selectors.btn),this.animation=!0,this.loadFunctions(),this.bindEvents()}loadFunctions(){this.animation=window.localStorage.getItem("animation")==="true",this.changeAnimation(this.animation)}bindEvents(){this.animationBodyElement.on("click",this.clickToAnimation.bind(this))}clickToAnimation(){this.animationBtnElement.hasClass(this.classes.isActive)?this.changeAnimation(!1):this.changeAnimation(!0)}changeAnimation(t){jQuery.fx.off=!t,this.setClassToBtn(t),this.setToLocStore(t)}setClassToBtn(t){t?this.animationBtnElement.addClass(this.classes.isActive):this.animationBtnElement.removeClass(this.classes.isActive)}setToLocStore(t){window.localStorage.setItem("animation",t)}}class A{constructor(){n(this,"selectors",{settings:"[data-js-settings]",open:"[data-js-settings-open]",close:"[data-js-settings-close]"});this.settingsElement=$(this.selectors.settings),this.settingsOpenBtn=$(this.selectors.open),this.settingsCloseBtn=$(this.selectors.close),this.bindEvents()}bindEvents(){this.settingsOpenBtn.on("click",this.openSettingsBlock.bind(this)),this.settingsCloseBtn.on("click",this.closeSettingsBlock.bind(this))}openSettingsBlock(){this.settingsElement.animate({opacity:1,scale:1},150,function(){$(this).css("border-radius","0")})}closeSettingsBlock(){this.settingsElement.animate({opacity:0,scale:0},150)}}function g(s,t){t.text($(s.target).val().length)}const f={form:"[data-js-form]",redactBtn:"[data-js-redact-btn]"};function E(s,t){let{target:e}=s;if(U(e)){let a=e.closest(f==null?void 0:f.form),d=a.querySelector(f==null?void 0:f.redactBtn),C=a.querySelectorAll("input"),B=x(t,C),b=_(C);d.disabled=!b||B}}function U(s){return s.tagName==="INPUT"}function x(s,t){let e=0,i=t.length;return t.forEach((a,d)=>{a.value===s[d]&&e++}),e===i}function _(s){let t=[];return s.forEach(e=>t.push(e.value)),t.every(e=>e.length)}class S{constructor(){n(this,"selectors",{user:"[data-js-user]",content:"[data-js-user-content]",form:"[data-js-user-form]",loading:"[data-js-user-loading]",open:"[data-js-user-open]",close:"[data-js-user-close]",redact:"[data-js-user-redact-btn]",exit:"[data-js-user-exit]",delete:"[data-js-user-delete]",organizationInput:"[data-js-user-organization]",organizationCounter:"[data-js-user-organization-counter]",loginInput:"[data-js-user-login]",loginCounter:"[data-js-user-login-counter]",passwordInput:"[data-js-user-password]",passwordCounter:"[data-js-user-password-counter]"});n(this,"classes",{isActive:"is-active"});n(this,"redact",async()=>{try{if(r(this.redactBtn,this.loadingElement),await this.user.checkDoubleLogin(this.loginInputElement.val())){let e={id:o.activeUser.id,login:this.loginInputElement.val(),password:this.passwordInputElement.val(),organization:this.organizationInputElement.val()};(await y(e)).status===200?(o.activeUser=e,this.user.setToLocalStorage(),m("Пользователь изменен!!"),this.redactBtn.attr("disabled",!1),this.closeBlock()):alert("Что-то пошло не так..")}else alert("Пользователь с таким логином уже существует!!")}catch{alert("Что-то пошло не так..")}finally{r(this.redactBtn,this.loadingElement)}});n(this,"delete",async()=>{try{let t={params:{id:o.activeUser.id}};(await I(t)).status===200?(m("Пользователь удален!!"),setTimeout(()=>{this.user.becomeToAuthorization()},1e3)):alert("Что-то пошло не так..")}catch{alert("Что-то пошло не так..")}});this.user=new o,this.userElement=$(this.selectors.user),this.userContentElement=this.userElement.find(this.selectors.content),this.formElement=this.userElement.find(this.selectors.form),this.loadingElement=this.userElement.find(this.selectors.loading),this.openBtn=$(this.selectors.open),this.closeBtn=this.userElement.find(this.selectors.close),this.redactBtn=this.userElement.find(this.selectors.redact),this.exitBtn=this.userElement.find(this.selectors.exit),this.deleteBtn=this.userElement.find(this.selectors.delete),this.organizationInputElement=$(this.formElement).find(this.selectors.organizationInput),this.organizationCounterElement=$(this.formElement).find(this.selectors.organizationCounter),this.loginInputElement=$(this.formElement).find(this.selectors.loginInput),this.loginCounterElement=$(this.formElement).find(this.selectors.loginCounter),this.passwordInputElement=$(this.formElement).find(this.selectors.passwordInput),this.passwordCounterElement=$(this.formElement).find(this.selectors.passwordCounter),this.loadFunctions(),this.bindEvents()}loadFunctions(){this.setUserInfo(),this.setUserCounter(),this.redactBtn.attr("disabled",!0)}bindEvents(){this.openBtn.on("click",this.openBlock.bind(this)),this.closeBtn.on("click",this.closeBlock.bind(this)),this.organizationInputElement.on("input",t=>{g(t,this.organizationCounterElement),E(t,[o.activeUser.organization,o.activeUser.login,o.activeUser.password])}),this.loginInputElement.on("input",t=>{g(t,this.loginCounterElement),E(t,[o.activeUser.organization,o.activeUser.login,o.activeUser.password])}),this.passwordInputElement.on("input",t=>{g(t,this.passwordCounterElement),E(t,[o.activeUser.organization,o.activeUser.login,o.activeUser.password])}),this.redactBtn.on("click",this.clickToRedact.bind(this)),this.exitBtn.on("click",this.clickToExit.bind(this)),this.deleteBtn.on("click",this.clickToDelete.bind(this))}setUserInfo(){this.organizationInputElement.val(o.activeUser.organization),this.loginInputElement.val(o.activeUser.login),this.passwordInputElement.val(o.activeUser.password)}setUserCounter(){this.organizationCounterElement.text(this.organizationInputElement.val().length),this.loginCounterElement.text(this.loginInputElement.val().length),this.passwordCounterElement.text(this.passwordInputElement.val().length)}openBlock(){this.userElement.addClass(this.classes.isActive),this.userContentElement.animate({top:"50%"},250)}closeBlock(){this.userContentElement.animate({top:"-100%"},200,()=>{this.userElement.removeClass(this.classes.isActive)})}clickToRedact(){new L().onSubmit(this.formElement)&&confirm("Вы действительно хотите редактировать профиль?")&&this.redact()}clickToExit(){confirm("Вы действительно хотите выйти?")&&this.user.becomeToAuthorization()}clickToDelete(){confirm("Вы действительно хотите удалить профиль?")&&this.delete()}}function z(s){return c.get(`${h}/student_group/getStudentsGroups.php${s}`)}function V(s){return c.get(`${h}/student_group/checkStudentGroup.php${s}`)}function O(s){return c.post(`${h}/student_group/createStudentGroup.php`,s,{headers:{"Content-Type":"application/json"}})}function R(s){return c.delete(`${h}/student_group/deleteStudentGroup.php`,s)}function D(s){return c.patch(`${h}/student_group/updateStudentGroup.php`,s,{headers:{"Content-Type":"application/json"}})}class F extends o{constructor(){super();n(this,"checkGroup",async(e="",i="")=>{try{let a=`?user_id=${o.activeUser.id}&id=${e}&name=${i}`;const d=await V(a);if(d.status===200)return!d.data.length;alert("Что-то пошло не так..")}catch{alert("Что-то пошло не так..")}});this.activeGroup={}}}const p=class p{constructor(){n(this,"selectors",{list:"[data-js-groups-list]",empty:"[data-js-groups-list-empty]",loading:"[data-js-groups-list-loading]"});n(this,"classes",{isActive:"is-active"});n(this,"getGroups",async()=>{try{this.loadingElement.addClass(this.classes.isActive);let t=`?user_id=${o.activeUser.id}`;const e=await z(t);e.status===200?(p.groupsList=e.data,e.data.length?this.setUserGroups():this.setEmptyGroups()):alert("Что-то пошло не так..")}catch(t){console.log(t),alert("Что-то пошло не так..")}finally{this.loadingElement.removeClass(this.classes.isActive)}});n(this,"checkDoubleName",t=>p.groupsList.length?!p.groupsList.some(e=>e.name===t):!0);this.user=new o,this.listElement=$(this.selectors.list),this.emptyElement=$(this.selectors.empty),this.loadingElement=$(this.selectors.loading)}setUserGroups(){let t=p.groupsList.map(i=>`
                    <li class="groups__item list__item">
                        <p class="h4">${i.name}</p>
                        <div class="list__btn-bar">
                            <button class="list-btn"
                                    type="button"
                                    aria-label="Редактировать группу"
                                    title="Редактировать группу"
                                    data-js-groups-redact-open
                            >
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M21.1213 2.70705C19.9497 1.53548 18.0503 1.53547 16.8787 2.70705L15.1989 4.38685L7.29289 12.2928C7.16473 12.421 7.07382 12.5816 7.02986 12.7574L6.02986 16.7574C5.94466 17.0982 6.04451 17.4587 6.29289 17.707C6.54127 17.9554 6.90176 18.0553 7.24254 17.9701L11.2425 16.9701C11.4184 16.9261 11.5789 16.8352 11.7071 16.707L19.5556 8.85857L21.2929 7.12126C22.4645 5.94969 22.4645 4.05019 21.2929 2.87862L21.1213 2.70705ZM18.2929 4.12126C18.6834 3.73074 19.3166 3.73074 19.7071 4.12126L19.8787 4.29283C20.2692 4.68336 20.2692 5.31653 19.8787 5.70705L18.8622 6.72357L17.3068 5.10738L18.2929 4.12126ZM15.8923 6.52185L17.4477 8.13804L10.4888 15.097L8.37437 15.6256L8.90296 13.5112L15.8923 6.52185ZM4 7.99994C4 7.44766 4.44772 6.99994 5 6.99994H10C10.5523 6.99994 11 6.55223 11 5.99994C11 5.44766 10.5523 4.99994 10 4.99994H5C3.34315 4.99994 2 6.34309 2 7.99994V18.9999C2 20.6568 3.34315 21.9999 5 21.9999H16C17.6569 21.9999 19 20.6568 19 18.9999V13.9999C19 13.4477 18.5523 12.9999 18 12.9999C17.4477 12.9999 17 13.4477 17 13.9999V18.9999C17 19.5522 16.5523 19.9999 16 19.9999H5C4.44772 19.9999 4 19.5522 4 18.9999V7.99994Z" fill="#000000"/>
                                </svg>
                            </button>
                            <button class="list-btn"
                                    type="button"
                                    aria-label="Удалить группу"
                                    title="Удалить группу"
                                    data-js-groups-delete
                            >
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 7H20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M6 7V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </li>
            `).join(""),e=$('<ul class="groups__list list list--padding"></ul>');e.html(t),this.listElement.html(e),$(document).trigger("groupsListRendered")}setEmptyGroups(){this.emptyElement.toggleClass(this.classes.isActive)}};n(p,"groupsList",[]),n(p,"activeGroup",{});let l=p;class H{constructor(){n(this,"selectors",{root:"[data-js-create-group]",open:"[data-js-create-group-open]",close:"[data-js-create-group-close]",input:"[data-js-create-group-input]",counter:"[data-js-create-group-counter]",create:"[data-js-create-group-create]",loading:"[data-js-create-group-loading]"});n(this,"classes",{isActive:"is-active"});n(this,"create",async()=>{try{r(this.createBtn,this.loadingElement);let t=this.useGroups.checkDoubleName(this.inputElement.val()),e=await this.groups.checkGroup("",this.inputElement.val());if(t&&e){let i={user_id:o.activeUser.id,name:this.inputElement.val()};(await O(i)).status===200?(m("Группа добавлена!!"),this.closeBlock(),this.createBtn.attr("disabled",!1),await this.useGroups.getGroups()):alert("Что-то пошло не так..")}else alert("Такая группа уже существует!!")}catch{alert("Что-то пошло не так..")}finally{r(this.createBtn,this.loadingElement)}});this.groups=new F,this.useGroups=new l,this.user=new o,this.createGroupElement=$(this.selectors.root),this.openBtn=$(this.selectors.open),this.closeBtn=this.createGroupElement.find(this.selectors.close),this.inputElement=this.createGroupElement.find(this.selectors.input),this.counterElement=this.createGroupElement.find(this.selectors.counter),this.createBtn=this.createGroupElement.find(this.selectors.create),this.loadingElement=this.createGroupElement.find(this.selectors.loading),this.loadFunctions(),this.bindEvents()}loadFunctions(){this.clearInfo()}bindEvents(){this.openBtn.on("click",this.openBlock.bind(this)),this.closeBtn.on("click",this.closeBlock.bind(this)),this.inputElement.on("input",t=>{g(t,this.counterElement),E(t,[""])}),this.createBtn.on("click",this.clickToCreate.bind(this))}clearInfo(){this.inputElement.val(""),this.counterElement.text(0)}openBlock(){this.createGroupElement.addClass(this.classes.isActive),this.createGroupElement.animate({opacity:1,scale:1},150,function(){$(this).css("border-radius","0")})}closeBlock(){this.createGroupElement.animate({opacity:0,scale:0},150,()=>{this.createGroupElement.removeClass(this.classes.isActive),this.clearInfo()})}clickToCreate(){confirm("Вы действительно хотите создать группу?")&&this.create()}}class M{constructor(){n(this,"selectors",{root:"[data-js-groups]",name:"[data-js-groups-name]",delete:"[data-js-groups-delete]"});n(this,"classes",{isActive:"is-active"});n(this,"loadFunctions",async()=>{this.setUserOrganizationName(),await this.useGroups.getGroups(),$(document).on("groupsListRendered",()=>{this.bindEvents()})});n(this,"delete",async t=>{try{let e=l.groupsList[t].id,i={params:{user_id:o.activeUser.id,id:e}};(await R(i)).status===200?(l.groupsList=l.groupsList.filter(d=>d.id!==e),l.groupsList.length?this.useGroups.setUserGroups():this.useGroups.setEmptyGroups(),m("Группа удалена!!")):alert("Что-то пошло не так..")}catch{alert("Что-то пошло не так..")}});this.useGroups=new l,this.groupsElement=$(this.selectors.root),this.nameElement=this.groupsElement.find(this.selectors.name),$(document).on("groupsListRendered",()=>{this.deleteBtns=this.groupsElement.find(this.selectors.delete)}),this.loadFunctions()}bindEvents(){this.deleteBtns.each((t,e)=>{$(e).on("click",()=>{confirm("Вы действительно хотите удалить группу?")&&this.delete(t)})})}setUserOrganizationName(){this.nameElement.text(o.activeUser.organization)}}function v(s){let t=s.getBoundingClientRect(),e=t.top,i=t.left;return{top:e,left:i}}class N{constructor(){n(this,"selectors",{root:"[data-js-groups-redact]",open:"[data-js-groups-redact-open]",close:"[data-js-groups-redact-close]",input:"[data-js-groups-redact-input]",counter:"[data-js-groups-redact-counter]",redact:"[data-js-groups-redact-btn]",loading:"[data-js-groups-redact-loading]"});n(this,"classes",{isActive:"is-active"});n(this,"loadFunctions",()=>{});n(this,"redact",async()=>{try{if(r(this.redactBtn,this.loadingElement),this.useGroups.checkDoubleName(this.inputElement.val())){let e={user_id:o.activeUser.id,id:l.activeGroup.id,name:this.inputElement.val()};(await D(e)).status===200?(m("Группа изменена!!"),this.closeBlock(),this.redactBtn.attr("disabled",!1),await this.useGroups.getGroups()):alert("Что-то пошло не так..")}else alert("Такая группа уже существует!!")}catch{alert("Что-то пошло не так..")}finally{r(this.redactBtn,this.loadingElement)}});this.useGroups=new l,this.redactElement=$(this.selectors.root),this.closeBtn=this.redactElement.find(this.selectors.close),this.inputElement=this.redactElement.find(this.selectors.input),this.counterElement=this.redactElement.find(this.selectors.counter),this.redactBtn=this.redactElement.find(this.selectors.redact),this.loadingElement=this.redactElement.find(this.selectors.loading),this.coordinates={},$(document).on("groupsListRendered",()=>{this.openBtns=$(this.selectors.open),this.openBtns.each((t,e)=>{$(e).on("click",()=>{this.setInfo(t),this.openBlock(e)})})}),this.bindEvents(),this.loadFunctions()}bindEvents(){this.closeBtn.on("click",this.closeBlock.bind(this)),this.inputElement.on("input",t=>{g(t,this.counterElement),E(t,[l.activeGroup.name])}),this.redactBtn.on("click",this.clickToRedact.bind(this))}setInfo(t){l.activeGroup=l.groupsList[t];let e=l.activeGroup.name;this.inputElement.val(e),this.counterElement.text(e.length)}openBlock(t){this.redactElement.addClass(this.classes.isActive),this.coordinates=v(t),this.redactElement.css({transformOrigin:`${u(this.coordinates.left)+1.5}rem ${u(this.coordinates.top)+1.5}rem`}),this.redactElement.animate({scale:1},150,function(){$(this).css("border-radius","0")}),$(document).trigger("groupsRedactOpen")}closeBlock(){this.redactElement.animate({scale:0},150,()=>{this.redactElement.removeClass(this.classes.isActive)}),this.redactBtn.attr("disabled",!0)}clickToRedact(){confirm("Вы действительно хотите редактировать группу?")&&this.redact()}}function k(s){return c.get(`${h}/lessons/getLessons.php${s}`)}function Z(s){return c.get(`${h}/lessons/checkLesson.php${s}`)}function P(s){return c.post(`${h}/lessons/createLesson.php`,s,{headers:{"Content-Type":"application/json"}})}function q(s){return c.delete(`${h}/lessons/deleteLesson.php`,s)}function Q(s){return c.patch(`${h}/lessons/updateLesson.php`,s,{headers:{"Content-Type":"application/json"}})}function J(s,t){return s.length<t?s:`${s.slice(0,t-1).trimEnd()}..`}class K{constructor(){n(this,"selectors",{root:"[data-js-groups-lessons]",loading:"[data-js-groups-lessons-loading]",nullList:"[data-js-groups-lessons-null-list]",listContainer:"[data-js-groups-lessons-list-container]",lesson:"[data-js-groups-lessons-item]",delete:"[data-js-groups-lessons-delete]",createBlock:"[data-js-groups-lessons-create-block]",createOpen:"[data-js-groups-lessons-create-open]",createInput:"[data-js-groups-lessons-create-input]",createCounter:"[data-js-groups-lessons-create-counter]",create:"[data-js-groups-lessons-create]",createLoading:"[data-js-groups-lessons-create-loading]",createClose:"[data-js-groups-lessons-create-close]",redactBlock:"[data-js-groups-lessons-redact-block]",redactOpen:"[data-js-groups-lessons-redact-open]",redactInput:"[data-js-groups-lessons-redact-input]",redactCounter:"[data-js-groups-lessons-redact-counter]",redact:"[data-js-groups-lessons-redact]",redactLoading:"[data-js-groups-lessons-redact-loading]",redactClose:"[data-js-groups-lessons-redact-close]",info:"[data-js-groups-lessons-info]",infoClose:"[data-js-groups-lessons-info-close]",infoText:"[data-js-groups-lessons-info-text]"});n(this,"classes",{isActive:"is-active"});n(this,"loadFunctions",()=>{});n(this,"getLessons",async()=>{try{this.setLoading(!1,!1,!0);let t=`?user_id=${o.activeUser.id}&group_id=${l.activeGroup.id}`;const e=await k(t);e.status===200?e.data.length?(this.lessons=e.data,this.setLessonsList(),this.setLoading(!1,!0,!1)):this.setLoading(!0,!1,!1):(alert("Что-то пошло не так.."),this.setLoading(!1,!1,!0))}catch{alert("Что-то пошло не так..")}});n(this,"createLesson",async()=>{try{r(this.createBtn,this.createLoadingElement);let t=this.checkDoubleLesson(this.createInputElement.val()),e=await this.checkALesson("",this.createInputElement.val());if(t&&e){let i={user_id:o.activeUser.id,group_id:l.activeGroup.id,name:this.createInputElement.val()};(await P(i)).status===200?(m("Предмет добавлен!!"),this.closeCreateBlock(),await this.getLessons()):alert("Что-то пошло не так..")}else alert("Такой предмет уже существует!!")}catch{alert("Что-то пошло не так..")}finally{r(this.createBtn,this.createLoadingElement)}});n(this,"checkALesson",async(t="",e="")=>{try{let i=`?user_id=${o.activeUser.id}&group_id=${l.activeGroup.id}&id=${t}&name=${e}`;const a=await Z(i);if(a.status===200)return!a.data.length;alert("Что-то пошло не так..")}catch{alert("Что-то пошло не так..")}});n(this,"deleteLesson",async t=>{try{let e={params:{user_id:o.activeUser.id,group_id:l.activeGroup.id,id:t}};(await q(e)).status===200?(this.lessons=this.lessons.filter(a=>a.id!==t),this.setLessonsList(),m("Предмет удален!!")):alert("Что-то пошло не так..")}catch{alert("Что-то пошло не так..")}});n(this,"redactLesson",async t=>{try{r(this.redactBtn,this.redactLoadingElement);let e=this.checkDoubleLesson(this.redactInputElement.val()),i=await this.checkALesson("",this.redactInputElement.val());if(e&&i){let a={user_id:o.activeUser.id,group_id:l.activeGroup.id,id:t,name:this.redactInputElement.val()};(await Q(a)).status===200?(m("Предмет изменен!!"),this.closeRedactBlock(),await k()):alert("Что-то пошло не так..")}else alert("Такой предмет уже существует!!")}catch{alert("Что-то пошло не так..")}finally{r(this.redactBtn,this.redactLoadingElement)}});this.groupsLessonsElement=$(this.selectors.root),this.loadingElement=this.groupsLessonsElement.find(this.selectors.loading),this.nullListElement=this.groupsLessonsElement.find(this.selectors.nullList),this.listContainerElement=this.groupsLessonsElement.find(this.selectors.listContainer),this.createElement=this.groupsLessonsElement.find(this.selectors.createBlock),this.createOpenBtn=this.groupsLessonsElement.find(this.selectors.createOpen),this.createInputElement=this.groupsLessonsElement.find(this.selectors.createInput),this.createCounterElement=this.groupsLessonsElement.find(this.selectors.createCounter),this.createBtn=this.groupsLessonsElement.find(this.selectors.create),this.createLoadingElement=this.groupsLessonsElement.find(this.selectors.createLoading),this.createCloseBtn=this.groupsLessonsElement.find(this.selectors.createClose),this.infoElement=this.groupsLessonsElement.find(this.selectors.info),this.infoCloseBtn=this.groupsLessonsElement.find(this.selectors.infoClose),this.infoTextElement=this.groupsLessonsElement.find(this.selectors.infoText),this.redactElement=this.groupsLessonsElement.find(this.selectors.redactBlock),this.redactInputElement=this.groupsLessonsElement.find(this.selectors.redactInput),this.redactCounterElement=this.groupsLessonsElement.find(this.selectors.redactCounter),this.redactBtn=this.groupsLessonsElement.find(this.selectors.redact),this.redactLoadingElement=this.groupsLessonsElement.find(this.selectors.redactLoading),this.redactCloseBtn=this.groupsLessonsElement.find(this.selectors.redactClose),this.lessons=[],$(document).on("groupsRedactOpen",async()=>{await this.getLessons(),this.lessonsElements=this.groupsLessonsElement.find(this.selectors.lesson),this.deleteBtns=this.groupsLessonsElement.find(this.selectors.delete),this.redactOpenBtns=this.groupsLessonsElement.find(this.selectors.redactOpen),this.lessonsElements.each((t,e)=>{$(e).on("click",()=>{let i=this.lessons[t].name;this.openInfoBlock(e,i)})}),this.deleteBtns.each((t,e)=>{$(e).on("click",i=>{let a=this.lessons[t].id;this.clickToDelete(a),i.stopPropagation()})}),this.redactOpenBtns.each((t,e)=>{$(e).on("click",i=>{let a=this.lessons[t].name;this.openRedactBlock(a,t),i.stopPropagation()})})}),this.bindEvents(),this.loadFunctions()}bindEvents(){this.createOpenBtn.on("click",this.openCreateBlock.bind(this)),this.createCloseBtn.on("click",this.closeCreateBlock.bind(this)),this.createInputElement.on("input",t=>{g(t,this.createCounterElement),E(t,[""])}),this.createBtn.on("click",this.clickToCreate.bind(this)),this.infoCloseBtn.on("click",this.closeInfoBlock.bind(this)),this.redactCloseBtn.on("click",this.closeRedactBlock.bind(this)),this.redactInputElement.on("input",t=>{g(t,this.redactCounterElement)})}setLoading(t,e,i){t?this.nullListElement.addClass(this.classes.isActive):this.nullListElement.removeClass(this.classes.isActive),e?this.listContainerElement.addClass(this.classes.isActive):this.listContainerElement.removeClass(this.classes.isActive),i?this.loadingElement.addClass(this.classes.isActive):this.loadingElement.removeClass(this.classes.isActive)}setLessonsList(){let t=this.lessons.map(i=>`
                    <li class="groups-lessons__item list__item list__item--small" data-js-groups-lessons-item>
                        <p class="h4">${J(i.name,9)}</p>
                        <div class="list__btn-bar">
                            <button class="list-btn"
                                    type="button"
                                    aria-label="Редактировать предмет"
                                    title="Редактировать предмет"
                                    data-js-groups-lessons-redact-open
                            >
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M21.1213 2.70705C19.9497 1.53548 18.0503 1.53547 16.8787 2.70705L15.1989 4.38685L7.29289 12.2928C7.16473 12.421 7.07382 12.5816 7.02986 12.7574L6.02986 16.7574C5.94466 17.0982 6.04451 17.4587 6.29289 17.707C6.54127 17.9554 6.90176 18.0553 7.24254 17.9701L11.2425 16.9701C11.4184 16.9261 11.5789 16.8352 11.7071 16.707L19.5556 8.85857L21.2929 7.12126C22.4645 5.94969 22.4645 4.05019 21.2929 2.87862L21.1213 2.70705ZM18.2929 4.12126C18.6834 3.73074 19.3166 3.73074 19.7071 4.12126L19.8787 4.29283C20.2692 4.68336 20.2692 5.31653 19.8787 5.70705L18.8622 6.72357L17.3068 5.10738L18.2929 4.12126ZM15.8923 6.52185L17.4477 8.13804L10.4888 15.097L8.37437 15.6256L8.90296 13.5112L15.8923 6.52185ZM4 7.99994C4 7.44766 4.44772 6.99994 5 6.99994H10C10.5523 6.99994 11 6.55223 11 5.99994C11 5.44766 10.5523 4.99994 10 4.99994H5C3.34315 4.99994 2 6.34309 2 7.99994V18.9999C2 20.6568 3.34315 21.9999 5 21.9999H16C17.6569 21.9999 19 20.6568 19 18.9999V13.9999C19 13.4477 18.5523 12.9999 18 12.9999C17.4477 12.9999 17 13.4477 17 13.9999V18.9999C17 19.5522 16.5523 19.9999 16 19.9999H5C4.44772 19.9999 4 19.5522 4 18.9999V7.99994Z" fill="#000000"/>
                                </svg>
                            </button>
                            <button class="list-btn"
                                    type="button"
                                    aria-label="Удалить предмет"
                                    title="Удалить предмет"
                                    data-js-groups-lessons-delete
                            >
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 7H20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M6 7V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </li>
            `).join(""),e=$('<ul class="groups-lessons__list list list--padding"></ul>');e.html(t),this.listContainerElement.html(e)}openCreateBlock(){this.createInputElement.val(""),this.createCounterElement.text(0),this.createElement.addClass(this.classes.isActive);let t=v(this.createOpenBtn[0]);this.createElement.css({transformOrigin:`${u(t.left)+8}rem ${u(t.top)+1.5}rem`}),this.createElement.animate({scale:1},150,function(){$(this).css("border-radius","0")})}closeCreateBlock(){this.createElement.animate({scale:0},150,()=>{this.createElement.removeClass(this.classes.isActive)})}clickToCreate(){confirm("Вы действительно хотите создать предмет?")&&this.createLesson()}checkDoubleLesson(t){return this.lessons.length?!this.lessons.some(e=>e.name===t):!0}openInfoBlock(t,e){this.infoElement.addClass(this.classes.isActive),this.infoTextElement.text(e);let i=v(t);this.infoElement.css({transformOrigin:`${u(i.left)+8}rem ${u(i.top)+1.5}rem`}),this.infoElement.animate({scale:1},150,function(){$(this).css("border-radius","0")})}closeInfoBlock(){this.infoElement.animate({scale:0},150,()=>{this.infoElement.removeClass(this.classes.isActive)})}clickToDelete(t){confirm("Вы действительно хотите удалить предмет?")&&this.deleteLesson(t)}openRedactBlock(t,e){this.redactInputElement.val(t),this.redactCounterElement.text(this.redactInputElement.val().length),this.redactElement.addClass(this.classes.isActive);let i=v(this.redactOpenBtns[e]);this.redactElement.css({transformOrigin:`${u(i.left)+1.5}rem ${u(i.top)+1.5}rem`}),this.redactElement.animate({scale:1},150,function(){$(this).css("border-radius","0")}),this.redactInputElement.on("input",a=>{E(a,[t])})}closeRedactBlock(){this.redactElement.animate({scale:0},150,()=>{this.redactElement.removeClass(this.classes.isActive)})}clickToRedact(t){confirm("Вы действительно хотите редактировать предмет?")&&this.redactLesson(t)}}new G;new T;new A;new L;new o().logInCheck();new S;new H;new M;new N;new K;
