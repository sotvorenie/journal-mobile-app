var d=Object.defineProperty;var c=(t,r,s)=>r in t?d(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var n=(t,r,s)=>c(t,typeof r!="symbol"?r+"":r,s);class h{constructor(){n(this,"selectors",{form:"[data-js-form]",fieldErrors:"[data-js-form-field-errors]"});n(this,"errorMessages",{valueMissing:()=>"Пожалуйста, заполните это поле",patternMismatch:({title:r})=>r||"Данные не соответствуют формату",tooShort:({minLength:r})=>`Минимум символов — ${r}`,tooLong:({maxLength:r})=>`Максимум символов — ${r}`});this.bindEvents()}manageErrors(r,s){const e=r.parentElement.querySelector(this.selectors.fieldErrors);e.innerHTML=s.map(i=>`<span class="field__error">${i}</span>`).join("")}validateField(r){const s=r.validity,e=[];Object.entries(this.errorMessages).forEach(([o,a])=>{s[o]&&e.push(a(r))}),this.manageErrors(r,e);const i=e.length===0;return r.ariaInvalid=!i,i}onBlur(r){const{target:s}=r,e=$(s).closest(this.selectors.form),i=s.required;e&&i&&this.validateField(s)}onSubmit(r){if(!$(r).is(this.selectors.form))return;const e=$(r).find(":input").filter(function(){return $(this).prop("required")});let i=!0,o=null;return e.each((function(a,l){this.validateField(l)||(i=!1,o||(o=l))}).bind(this)),i?!0:(o.focus(),!1)}bindEvents(){document.addEventListener("blur",r=>{this.onBlur(r)},{capture:!0})}}export{h as F};
